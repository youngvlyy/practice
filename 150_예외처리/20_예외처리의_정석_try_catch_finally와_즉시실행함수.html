<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>20_예외처리의_정석_try_catch_finally와_즉시실행함수</title>
</head>
<body>
    <h1>try~catch~finally 예외처리 구문</h1>

    <pre>
        1. 에러가 발생할 가능성이 있는 코드를 사용하는 쪽에서
           try~catch 처리를 한다.

        2. try~catch 구문은 동기방식의 처리에서만 효과가 있다.
           비동기에서는 안됨

        3. finally 구문은 에러발생과 상관없이 무조건 실행된다.
    </pre>

    <hr>

    <script>
        //실험적으로 에러를 발생시킬 함수 
        function secretFn(pwd){

            console.log('secretFn 함수 시작~!');

            if(pwd === undefined){
                //throw '비밀번호를 입력하지 않은 에러 발생~!';

                //Error 객체에는 발생한 에러에 대한 정보가 담겨있다.
                throw new Error('비밀번호를 입력하지 않은 에러 발생~!');
            }else{
                document.write(`전달받은 비밀번호는 ${pwd} 입니다.`);
            }

            console.log('secretFn 함수 종료~!');

        }


        //즉시실행 함수
        (function main(){
            console.log('main 함수 실행~!');

            try{//에러가 발생할 가능성이 있는 코드를 작성하는 구간
                // secretFn(123456);
                secretFn();
            }catch(err){ //에러발생시에 실행되는 코드 구간
                console.log('★★★에러메세지 :', err);
            }finally{
                //이 구간은 에러발생과 상관없이 무조건 실행되는 구간
                console.log('예외처리 완료~!');
            }

            console.log('main 함수 종료~!');
        }());
    </script>
</body>
</html>